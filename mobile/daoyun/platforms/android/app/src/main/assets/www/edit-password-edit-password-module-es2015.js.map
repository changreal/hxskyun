{"version":3,"sources":["./src/app/pages/mine/edit-password/edit-password.page.html","./src/app/pages/mine/edit-password/edit-password-routing.module.ts","./src/app/pages/mine/edit-password/edit-password.module.ts","./src/app/pages/mine/edit-password/edit-password.page.scss","./src/app/pages/mine/edit-password/edit-password.page.ts"],"names":[],"mappings":"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","file":"edit-password-edit-password-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar >\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button text=\\\"返回\\\" color=\\\"primary\\\"  defaultHref=\\\"/tabs/mine\\\" ></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>修改密码</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding>\\r\\n  <form #passwordForm novalidate>\\r\\n    <ion-list>\\r\\n      <!-- 旧密码 -->\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">输入旧密码</ion-label>\\r\\n        <ion-input type=\\\"password\\\" required [(ngModel)]=\\\"oldpassword\\\" name=\\\"oldpass\\\" #oldpass=\\\"ngModel\\\"\\r\\n                   pattern=\\\"[0-9a-zA-Z]{6,16}\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <!-- <ion-text [hidden]=\\\"isOldPassword\\\" padding-start color=\\\"danger\\\">您输入的旧密码不正确</ion-text> -->\\r\\n      <ion-text [hidden]=\\\"!oldpass.errors.pattern\\\" padding-start color=\\\"danger\\\" *ngIf=\\\"oldpass.invalid && oldpass.touched\\\">\\r\\n        密码格式为6至16位的数字字母\\r\\n      </ion-text>\\r\\n      <!-- 新密码 -->\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">请输入新密码</ion-label>\\r\\n        <ion-input type=\\\"password\\\" required [(ngModel)]=\\\"newPassword\\\" name=\\\"newpass\\\" #newpass=\\\"ngModel\\\"\\r\\n                   pattern=\\\"[0-9a-zA-Z]{6,16}\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-text [hidden]=\\\"!newpass.errors?.pattern\\\" padding-start color=\\\"danger\\\" *ngIf=\\\"newpass.invalid && newpass.touched\\\">\\r\\n        密码格式为6至16位的数字字母\\r\\n      </ion-text>\\r\\n      <!-- 再次新密码 -->\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">请再输入一次</ion-label>\\r\\n        <ion-input type=\\\"password\\\" required [(ngModel)]=\\\"checkPassword\\\" name=\\\"checkpass\\\" #checkpass=\\\"ngModel\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-text [hidden]=\\\"newPassword == checkPassword\\\" padding-start color=\\\"danger\\\">两次密码不一致</ion-text>\\r\\n    </ion-list>\\r\\n    <!-- 确定提交 -->\\r\\n    <ion-button expand=\\\"block\\\" [disabled]=\\\"passwordForm.invalid\\\" (click)=\\\"onSave()\\\">\\r\\n      确定\\r\\n    </ion-button>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EditPasswordPage } from './edit-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditPasswordPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EditPasswordPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditPasswordPageRoutingModule } from './edit-password-routing.module';\n\nimport { EditPasswordPage } from './edit-password.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EditPasswordPageRoutingModule\n  ],\n  declarations: [EditPasswordPage]\n})\nexport class EditPasswordPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21pbmUvZWRpdC1wYXNzd29yZC9lZGl0LXBhc3N3b3JkLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { MylocalstorageService } from 'src/app/shared/services/mylocalstorage.service';\r\nimport { ZrServicesService } from 'src/app/shared/services/zr-services.service';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\n\r\n@Component({\r\n  selector: 'app-edit-password',\r\n  templateUrl: './edit-password.page.html',\r\n  styleUrls: ['./edit-password.page.scss'],\r\n})\r\nexport class EditPasswordPage extends BaseUI implements OnInit {\r\n  isOldPassword = true;\r\n  oldPass:any\r\n  oldpassword: string;\r\n  newPassword: string;\r\n  checkPassword: string;\r\n  userId:any\r\n  constructor(public router:Router,\r\n    private localStorageService :MylocalstorageService,private zrServices :ZrServicesService,\r\n    private toastController: ToastController,) { \r\n      super()\r\n    }\r\n\r\n  async onSave() {\r\n    this.isOldPassword = this.oldPass == this.oldpassword ? true : false;\r\n    // 验证新密码\r\n    let params:object = {\r\n      \"userId\" : this.userId,\r\n      \"password\" : this.newPassword\r\n    }\r\n    if ( this.isOldPassword && this.newPassword == this.checkPassword) {\r\n      this.zrServices.updateUserinfo(params).then((result:any) => {\r\n        // console.log('更新:', result.data.password);\r\n        if(result.code=='200'){\r\n           super.showToast(this.toastController,'更新成功,重新登录')\r\n           this.router.navigateByUrl('/login') \r\n           this.localStorageService.remove('Token');\r\n           this.localStorageService.remove('uid');    \r\n       }\r\n       }).catch((error) => {\r\n        // console.log('错了。。。。')\r\n         super.showToast(this.toastController,'密码更新失败')\r\n       })\r\n    }\r\n    else {\r\n        super.showToast(this.toastController,'密码不正确')\r\n    }\r\n  }\r\n  ngOnInit() {\r\n    \r\n  }\r\n  \r\n  ionViewDidEnter(){\r\n    this.userId=this.localStorageService.get('uid','')\r\n    this.loadUserInfo()\r\n  }\r\n  loadUserInfo(){\r\n\r\n    this.zrServices.getUserByUserId(this.userId).then(async (result:any) => {\r\n      // console.log('here:', result.data);\r\n      if(result.code=='200'){\r\n          // console.log('asgagaeegeagr'+result.data.roleId)   \r\n          this.oldPass=result.data.password\r\n      } else{\r\n        // super.showToast(this.toastController,'获取信息失败')\r\n        // super.showToast(this.toastController,'用户信息更新失败')\r\n      }\r\n    }).catch((error) => {\r\n      console.log('获取用户信息失败', error)\r\n    })\r\n    \r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}