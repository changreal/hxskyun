{"version":3,"sources":["src/app/pages/create-classes/members/members.page.html","src/app/pages/create-classes/members/members-routing.module.ts","src/app/pages/create-classes/members/members.module.ts","src/app/pages/create-classes/members/members.page.scss","src/app/pages/create-classes/members/members.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/tabs/create-classes\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{courseName}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"loadMembers($event)\\\">\\r\\n    <ion-refresher-content\\r\\n      pullingIcon=\\\"arrow-dropdown\\\"\\r\\n      pullingText=\\\"下拉刷新\\\"\\r\\n      refreshingSpinner=\\\"circles\\\"\\r\\n      refreshingText=\\\"加载中...\\\">\\r\\n    </ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n\\r\\n  <!-- 信息操作栏 -->\\r\\n  <ion-card>\\r\\n\\r\\n    <!-- 点击部分 -->\\r\\n    <ion-item>\\r\\n      <ion-toolbar>\\r\\n        <ion-row class=\\\"ion-align-items-center\\\"> \\r\\n          <ion-col size='7' *ngIf=\\\"courseStatus!='已结课'\\\">\\r\\n            <ion-button  shape='round'  color=\\\"primary\\\" fill=\\\"solid\\\" [routerLink]=\\\"['/create-classes/sign-in-teacher']\\\"  [queryParams]=\\\"{courseId:courseId, courseMembersCount:members_count, courseName:courseName}\\\" >\\r\\n              <!-- <ion-icon  name=\\\"star\\\" size='small'></ion-icon> -->\\r\\n              <ion-icon name=\\\"hand-left-outline\\\" ></ion-icon>\\r\\n               <ion-label>&nbsp;发起签到&nbsp;</ion-label>\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col size='5'>\\r\\n            <ion-button shape='round'  color=\\\"warning\\\" fill=\\\"solid\\\" [routerLink]=\\\"['/create-classes/class-detail']\\\" [queryParams]=\\\"{courseId:courseId,courseName:courseName}\\\">\\r\\n              <ion-icon name=\\\"grid-outline\\\"></ion-icon>\\r\\n              <ion-label>&nbsp;班课详情&nbsp;</ion-label>\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-toolbar>\\r\\n    </ion-item>\\r\\n\\r\\n  </ion-card>\\r\\n\\r\\n\\r\\n  <!-- 成员列表 -->\\r\\n  <ion-list lines='full'>\\r\\n\\r\\n    <!-- 列表头 -->\\r\\n    <ion-list-header lines='none' class=\\\"ion-padding-horizontal\\\" >\\r\\n        <ion-button (click)=\\\"toggleShow()\\\"  fill=\\\"clear\\\">\\r\\n          <ion-label color=\\\"primary\\\">切换为按学号/经验值显示</ion-label>\\r\\n        </ion-button>\\r\\n    </ion-list-header>\\r\\n\\r\\n    <ion-item-divider>\\r\\n      <ion-label>成员总数</ion-label>\\r\\n      <ion-label class=\\\"ion-text-right\\\">&nbsp;&nbsp;{{members_count}}人</ion-label>\\r\\n    </ion-item-divider>\\r\\n\\r\\n    <!-- 成员信息部分 --> \\r\\n    \\r\\n\\r\\n    <ion-item  class=\\\"member-item\\\" *ngFor=\\\"let member of members;let i=index\\\" >\\r\\n      <!-- 头像部分 -->\\r\\n      <ion-note slot=\\\"start\\\" class=\\\"ion-no-margin ion-margin-vertical\\\">{{i+1}}</ion-note>\\r\\n      <ion-thumbnail slot=\\\"start\\\" class=\\\"mythumbnail\\\">\\r\\n        <div class=\\\"profile_icon_orange\\\">{{member.studentName[0]}}</div>\\r\\n      </ion-thumbnail>\\r\\n      <!-- 内容部分 -->\\r\\n      <ion-label>\\r\\n        <h3>{{member.studentName}}</h3>\\r\\n        <p>{{member.studentId}} <span class=\\\"exp ion-float-right exp-color\\\">{{member.studentExp}}&nbsp;经验值</span></p>\\r\\n        <p>签到<span>{{member.signedNumbers}}</span>&nbsp;&nbsp; 缺勤<span>{{member.unSignedNumbers}}</span></p>\\r\\n      </ion-label>\\r\\n    </ion-item>\\r\\n\\r\\n  </ion-list>\\r\\n\\r\\n\\r\\n  \\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MembersPage } from './members.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MembersPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MembersPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MembersPageRoutingModule } from './members-routing.module';\r\n\r\nimport { MembersPage } from './members.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MembersPageRoutingModule\r\n  ],\r\n  declarations: [MembersPage]\r\n})\r\nexport class MembersPageModule {}\r\n","export default \".exp-color {\\n  color: #ef9c05;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY3JlYXRlLWNsYXNzZXMvbWVtYmVycy9EOlxcaHhza3l1blxcbW9iaWxlXFxkYW95dW4vc3JjXFxhcHBcXHBhZ2VzXFxjcmVhdGUtY2xhc3Nlc1xcbWVtYmVyc1xcbWVtYmVycy5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2NyZWF0ZS1jbGFzc2VzL21lbWJlcnMvbWVtYmVycy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxjQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9jcmVhdGUtY2xhc3Nlcy9tZW1iZXJzL21lbWJlcnMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmV4cC1jb2xvcntcclxuICAgIGNvbG9yOiAjZWY5YzA1XHJcbn0iLCIuZXhwLWNvbG9yIHtcbiAgY29sb3I6ICNlZjljMDU7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ZrServicesService } from \"../../../shared/services/zr-services.service\";\r\nimport { LocalStorageService } from \"../../../shared/services/local-storage.service\";\r\nimport { ToastServiceProvider } from \"../../../shared/services/toast-service.service\";\r\nimport { EventService } from \"../../../shared/services/event.service\";\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\n\r\n@Component({\r\n  selector: 'app-members',\r\n  templateUrl: './members.page.html',\r\n  styleUrls: ['./members.page.scss'],\r\n})\r\nexport class MembersPage extends BaseUI  implements OnInit {\r\n\r\n  userId = ''\r\n  courseId = ''\r\n  courseName = ''\r\n  \r\n  members:any[];\r\n  members_count = ''\r\n  sort_flag = true // 默认按经验值绑定\r\n  courseStatus=''\r\n  constructor(private activatedRoute: ActivatedRoute,\r\n    private zrServices: ZrServicesService,\r\n    private localStorageService: LocalStorageService,\r\n    private toastService: ToastServiceProvider,\r\n    private router: Router,\r\n    public eventService: EventService,\r\n    public loadingController: LoadingController\r\n    ) { \r\n      super()\r\n    }\r\n\r\n  ngOnInit() {\r\n    this.activatedRoute.queryParams.subscribe((result) => {\r\n      this.courseId = result.courseId;\r\n      this.courseName = result.courseName\r\n    })\r\n    this.loadCourseInfo()\r\n    this.loadMembers(null)\r\n    super.showLoading( this.loadingController,'请等待',800)\r\n\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    this.activatedRoute.queryParams.subscribe((result) => {\r\n      this.courseId = result.courseId;\r\n      this.courseName = result.courseName\r\n    })\r\n    this.eventService.event.on('memberupdate', () => {\r\n      this.loadCourseInfo();\r\n      this.loadMembers(null)\r\n      super.showLoading( this.loadingController,'请等待',800)\r\n      \r\n    })\r\n\r\n  }\r\n\r\n\r\n  \r\n\r\n  // ionViewWillEnter() {\r\n  //   this.activatedRoute.queryParams.subscribe((result) => {\r\n  //     this.courseId = result.courseId;\r\n  //     this.courseName = result.courseName\r\n  //   })\r\n  //   this.loadCourseInfo()\r\n  //   this.loadMembers(null) \r\n  // }\r\n\r\n  // 获取课程信息\r\n  loadCourseInfo(){\r\n    // 根据id获取该班课的信息\r\n    this.zrServices.getCourseByCourseId(this.courseId).then(async (result:any) => {\r\n      // console.log(result);\r\n      \r\n      if(result.code == '200'){\r\n        this.courseStatus = result.data.endClassStatus\r\n        \r\n      }\r\n    }).catch((error) => {\r\n      console.log('查找班课信息失败', error);\r\n    })\r\n  }\r\n\r\n  loadMembers(event){\r\n    this.zrServices.getMembersByCourseId(this.courseId).then((result:any) => {\r\n      // console.log( '成员返回为：', result);\r\n      this.members = result.data\r\n      this.members_count = result.data.length\r\n      // 排序\r\n      this.sortMembers()\r\n      \r\n    }).catch((error) => {\r\n      console.log('获取', this.courseName, '课程信息失败')\r\n    }).finally(()=>{\r\n      if(event != null){\r\n        event.target.complete()\r\n      }\r\n    })\r\n\r\n  }\r\n  // 切换显示\r\n  toggleShow(){\r\n    this.sort_flag = !this.sort_flag\r\n    this.sortMembers()\r\n  }\r\n\r\n  sortMembers(){\r\n    if(this.sort_flag == true){\r\n      this.members.sort((a: any, b: any) => {\r\n        return b.studentExp - a.studentExp;//经验值大到小\r\n      })\r\n    }else{\r\n      this.members.sort((a: any, b: any) => {\r\n        return a.studentId - b.studentId;//学号小到大\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"members-members-module-es5.js"}