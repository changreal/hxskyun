{"version":3,"sources":["./src/app/pages/login/login.page.html","./src/app/pages/login/login.page.scss","./src/app/pages/login/login.page.ts"],"names":[],"mappings":"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","file":"default~mine-mine-module~pages-login-login-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n\\r\\n  <ion-toolbar>\\r\\n    <ion-title class='ion-text-center'>登录</ion-title>\\r\\n    <!-- <ion-buttons>\\r\\n      <button ion-button (click)=\\\"dismiss()\\\">\\r\\n        <span ion-text color='primary' showWhen=\\\"ios\\\">取消</span>\\r\\n        <ion-icon name=\\\"close-outline\\\" showWhen=\\\"android\\\"></ion-icon>\\r\\n      </button>\\r\\n    </ion-buttons> -->\\r\\n  </ion-toolbar>\\r\\n\\r\\n</ion-header>\\r\\n\\r\\n<ion-content no-padding>\\r\\n  <div padding-horizontal>\\r\\n  <form #f=\\\"ngForm\\\">\\r\\n    <ion-list padding-right no-margin>\\r\\n      <ion-item mode='md' class=\\\"ion-no-padding margin-left\\\">\\r\\n        <ion-label>请选择登录方式</ion-label>\\r\\n        <ion-select [ngModelOptions]=\\\"{standalone: true}\\\" [(ngModel)]=\\\"loginType\\\" value=\\\"phone\\\" interface=\\\"action-sheet\\\" (ionChange)='getValue()'>\\r\\n          <ion-select-option value=\\\"phone\\\">手机</ion-select-option>\\r\\n          <ion-select-option value=\\\"email\\\">邮箱</ion-select-option>\\r\\n          <ion-select-option value=\\\"userid\\\">学号</ion-select-option>\\r\\n        </ion-select>\\r\\n      </ion-item> \\r\\n\\r\\n    <ion-item>\\r\\n      <ion-icon name=\\\"person-outline\\\"></ion-icon>\\r\\n      <ion-label fixed>账号</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-input name=\\\"username\\\" type=\\\"text\\\" placeholder=\\\"请输入账号\\\" [(ngModel)]=\\\"username\\\" clearInput required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-icon name=\\\"lock-closed-outline\\\"></ion-icon>\\r\\n      <ion-label fixed>密码</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-input name=\\\"password\\\" type=\\\"{{pwshow?'text':'password'}}\\\"  placeholder='请输入密码' [(ngModel)]=\\\"password\\\"></ion-input>\\r\\n      <a href=\\\"javascript:;\\\"rel=\\\"external nofollow\\\" item-end (click)=\\\"pwshow=!pwshow\\\" [ngClass]=\\\"pwshow?'eyeshow':'eyehide'\\\">\\r\\n        <ion-icon name=\\\"eye-outline\\\" color=\\\"dark\\\" class=\\\"eye-hide\\\"></ion-icon>  <!--闭眼图标-->\\r\\n        <ion-icon name=\\\"eye-off-outline\\\" color=\\\"dark\\\" class=\\\"eye-show\\\"></ion-icon>  <!--睁眼图标-->\\r\\n      </a>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n    <!-- <ion-item>\\r\\n      <ion-input type=\\\"password\\\" placeholder=\\\"请输入密码\\\" #password></ion-input>\\r\\n    </ion-item> -->\\r\\n    <ion-grid>\\r\\n      <!-- 登录注册 -->\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-button expand=\\\"full\\\" color=\\\"primary\\\" (click)=\\\"onLogin()\\\">登录</ion-button>\\r\\n        </ion-col>\\r\\n        <!-- <ion-col>\\r\\n          <ion-button expand=\\\"full\\\" fill=\\\"outline\\\" color=\\\"primary\\\" href=\\\"/signup\\\">注册新账号</ion-button>\\r\\n        </ion-col> -->\\r\\n      </ion-row>\\r\\n      <!-- <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-button expand=\\\"full\\\" color=\\\"primary\\\" >微信登录</ion-button>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-button expand=\\\"full\\\"  color=\\\"primary\\\" >微博登录</ion-button>\\r\\n        </ion-col>\\r\\n      </ion-row> -->\\r\\n      <!-- 忘记密码 -->\\r\\n      <ion-row>\\r\\n        <!-- <ion-col>\\r\\n          <ion-button fill=\\\"clear\\\" size=\\\"small\\\" >手机号验证登录</ion-button>\\r\\n        </ion-col> -->\\r\\n        <ion-col>\\r\\n          <ion-button fill=\\\"clear\\\" size=\\\"small\\\" routerLink=\\\"/forget-password\\\">忘记密码？</ion-button>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-button fill=\\\"clear\\\" size=\\\"small\\\" routerLink=\\\"/register\\\">注册新账号</ion-button>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      \\r\\n    </ion-grid>\\r\\n    </form>\\r\\n  </div>\\r\\n  \\r\\n \\r\\n\\r\\n</ion-content>\\r\\n\\r\\n\"","export default \".toolbar-title-md {\\n  text-align: center;\\n}\\n\\n.eyehide .eye-hide, .eyeshow .eye-show {\\n  display: block;\\n}\\n\\n.eyehide .eye-show, .eyeshow .eye-hide {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vRDpcXGh4c2t5dW5cXG1vYmlsZVxcZGFveXVuL3NyY1xcYXBwXFxwYWdlc1xcbG9naW5cXGxvZ2luLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7QUNDSjs7QURDQTtFQUNJLGNBQUE7QUNFSjs7QURBQTtFQUNJLGFBQUE7QUNHSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50b29sYmFyLXRpdGxlLW1kIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB9XHJcbi5leWVoaWRlIC5leWUtaGlkZSwgLmV5ZXNob3cgLmV5ZS1zaG93e1xyXG4gICAgZGlzcGxheTogYmxvY2s7Ly/orqnlr7nosaHmiJDkuLrlnZfnuqflhYPntKBcclxufVxyXG4uZXllaGlkZSAuZXllLXNob3csIC5leWVzaG93IC5leWUtaGlkZXtcclxuICAgIGRpc3BsYXk6IG5vbmU7Ly/mraTlhYPntKDkuI3kvJrooqvmmL7npLpcclxufSIsIi50b29sYmFyLXRpdGxlLW1kIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uZXllaGlkZSAuZXllLWhpZGUsIC5leWVzaG93IC5leWUtc2hvdyB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4uZXllaGlkZSAuZXllLXNob3csIC5leWVzaG93IC5leWUtaGlkZSB7XG4gIGRpc3BsYXk6IG5vbmU7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { NavController, NavParams, AlertController, ToastController, ModalController, LoadingController ,} from '@ionic/angular';\r\nimport { NgForm } from '@angular/forms';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { LocalStorageService } from 'src/app/shared/services/local-storage.service';\r\nimport { MylocalstorageService } from 'src/app/shared/services/mylocalstorage.service';\r\n\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/shared/services/common.service';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\nimport { ZrServicesService } from 'src/app/shared/services/zr-services.service';\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage extends BaseUI implements OnInit {\r\n  \r\n  public loadingIsOpen: any = false\r\n  username: string = ''\r\n  password: string = ''\r\n  loading:any\r\n  public dataList:any\r\n  public peopleInfo:any = {\r\n    phone: '',\r\n    password:''\r\n  }\r\n  loginType='phone'\r\n  constructor(private alertController: AlertController,private toastController: ToastController,\r\n    public modalCtrl :ModalController,public loadingController: LoadingController,public http:HttpClient,\r\n    private localStorageService: MylocalstorageService,public router:Router,public common:CommonService,private zrServices: ZrServicesService\r\n    ) { super()}\r\n\r\n  // async dismiss() {\r\n  //   this.modalCtrl.dismiss({\r\n  //     'dismissed': true\r\n  //   });\r\n  // }\r\n\r\n  ngOnInit() {\r\n  }\r\n  \r\n async onLogin(form:NgForm){\r\n    console.log(this.username+this.password)\r\n    // let url=\"https://imoocqa.gugujiankong.com/api/account/login\"+\"?mobile=\"+this.username+\"&password=\"+this.password\r\n    // let url='/Login/checkLogin'\r\n    this.peopleInfo.phone=this.username\r\n    this.peopleInfo.password=this.password\r\n    console.log(\"login info:\"+this.peopleInfo)\r\n    if(this.username === ''){\r\n      let toast = await this.toastController.create({\r\n        message : '请输入您的手机号码或者邮箱',\r\n        duration :3000\r\n      });\r\n      toast.present();\r\n\r\n    }else if(this.password === ''){\r\n      let alert = await this.toastController.create({\r\n        message : '请输入您的密码',\r\n        duration : 3000\r\n      });\r\n      alert.present();\r\n\r\n    }else{\r\n      let params:object\r\n      if(this.loginType=='phone'){\r\n         params = {\r\n        \"phone\" : this.username,\r\n        \"password\" : this.password\r\n        }\r\n      }else if(this.loginType=='email'){\r\n        params = {\r\n          \"email\" : this.username,\r\n          \"password\" : this.password\r\n          }\r\n\r\n      }else if(this.loginType=='userid'){\r\n        params = {\r\n          \"userId\" : this.username,\r\n          \"password\" : this.password\r\n          }\r\n      }\r\n      // let params:object = {\r\n      //   \"phone\" : this.username,\r\n      //   \"password\" : this.password\r\n      // }\r\n      // 验证登录账号与密码，不对的话给出错误提示\r\n      super.showLoading(this.loadingController,\"登录中\")\r\n      this.zrServices.login(params).then((result:any) => {\r\n        console.log('登录的result是：', result);\r\n        if(result.code=='100'){\r\n            this.localStorageService.set('Token',result[\"data\"])\r\n            console.log('uid'+result.extra.userRole.userId)\r\n            this.localStorageService.set('uid',result.extra.userRole.userId)\r\n            this.localStorageService.set('roleId', result.extra.userRole.roleId)\r\n            super.showToast(this.toastController,'登录成功')\r\n            this.router.navigateByUrl('/tabs/join-classes') \r\n            console.log(result);   \r\n       }else {\r\n            console.log(result)\r\n            super.showToast(this.toastController,'登录失败,请检查账号和密码')\r\n       }\r\n       }).catch((error) => {\r\n            super.showToast(this.toastController,'登录失败')\r\n       })\r\n     }\r\n      // this.common.ajaxPost(url, this.peopleInfo)\r\n      // .then((response:any)=>{\r\n      //   super.showToast(this.toastController,response)\r\n      //   if(response['code']==100){   \r\n      //     console.log(response);\r\n      //     this.localStorageService.set('Token',response[\"data\"])\r\n      //     console.log('uid'+response['extra'])\r\n      //     this.router.navigateByUrl('/tabs')    \r\n      //     console.log(\"succ  in \")\r\n      //   }else{\r\n      //     this.presentToast(response[\"msg\"])    \r\n      //   }\r\n      // })\r\n      // .catch((err:any)=>{\r\n      //   console.log(err);\r\n      //   super.showToast(this.toastController,err)\r\n      // })\r\n    }\r\n\r\n\r\nasync presentToast(mes:string) {\r\n  const toast = await this.toastController.create({\r\n    message: mes,\r\n    duration: 2000\r\n  });\r\n  toast.present();\r\n}\r\n\r\n\r\ngetValue(){\r\n  console.log('登录方式'+this.loginType)\r\n}\r\n\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}