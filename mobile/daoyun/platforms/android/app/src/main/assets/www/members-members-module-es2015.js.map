{"version":3,"sources":["./src/app/pages/create-classes/members/members.page.html","./src/app/pages/create-classes/members/members-routing.module.ts","./src/app/pages/create-classes/members/members.module.ts","./src/app/pages/create-classes/members/members.page.scss","./src/app/pages/create-classes/members/members.page.ts"],"names":[],"mappings":"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","file":"members-members-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/tabs/create-classes\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{courseName}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"loadMembers($event)\\\">\\r\\n    <ion-refresher-content\\r\\n      pullingIcon=\\\"arrow-dropdown\\\"\\r\\n      pullingText=\\\"下拉刷新\\\"\\r\\n      refreshingSpinner=\\\"circles\\\"\\r\\n      refreshingText=\\\"加载中...\\\">\\r\\n    </ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n\\r\\n  <!-- 信息操作栏 -->\\r\\n  <ion-card>\\r\\n\\r\\n    <!-- 点击部分 -->\\r\\n    <ion-item>\\r\\n      <ion-toolbar>\\r\\n        <ion-row class=\\\"ion-align-items-center\\\"> \\r\\n          <ion-col size='7' *ngIf=\\\"courseStatus!='已结课'\\\">\\r\\n            <ion-button  shape='round'  color=\\\"primary\\\" fill=\\\"solid\\\" [routerLink]=\\\"['/create-classes/sign-in-teacher']\\\"  [queryParams]=\\\"{courseId:courseId, courseMembersCount:members_count, courseName:courseName}\\\" >\\r\\n              <!-- <ion-icon  name=\\\"star\\\" size='small'></ion-icon> -->\\r\\n              <ion-icon name=\\\"hand-left-outline\\\" ></ion-icon>\\r\\n               <ion-label>&nbsp;发起签到&nbsp;</ion-label>\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col size='5'>\\r\\n            <ion-button shape='round'  color=\\\"warning\\\" fill=\\\"solid\\\" [routerLink]=\\\"['/create-classes/class-detail']\\\" [queryParams]=\\\"{courseId:courseId,courseName:courseName}\\\">\\r\\n              <ion-icon name=\\\"grid-outline\\\"></ion-icon>\\r\\n              <ion-label>&nbsp;班课详情&nbsp;</ion-label>\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-toolbar>\\r\\n    </ion-item>\\r\\n\\r\\n  </ion-card>\\r\\n\\r\\n\\r\\n  <!-- 成员列表 -->\\r\\n  <ion-list lines='full'>\\r\\n\\r\\n    <!-- 列表头 -->\\r\\n    <ion-list-header lines='none' class=\\\"ion-padding-horizontal\\\" >\\r\\n        <ion-button (click)=\\\"toggleShow()\\\"  fill=\\\"clear\\\">\\r\\n          <ion-label color=\\\"primary\\\">切换为按学号/经验值显示</ion-label>\\r\\n        </ion-button>\\r\\n    </ion-list-header>\\r\\n\\r\\n    <ion-item-divider>\\r\\n      <ion-label>成员总数</ion-label>\\r\\n      <ion-label class=\\\"ion-text-right\\\">&nbsp;&nbsp;{{members_count}}人</ion-label>\\r\\n    </ion-item-divider>\\r\\n\\r\\n    <!-- 成员信息部分 --> \\r\\n    \\r\\n\\r\\n    <ion-item  class=\\\"member-item\\\" *ngFor=\\\"let member of members;let i=index\\\" >\\r\\n      <!-- 头像部分 -->\\r\\n      <ion-note slot=\\\"start\\\" class=\\\"ion-no-margin ion-margin-vertical\\\">{{i+1}}</ion-note>\\r\\n      <ion-thumbnail slot=\\\"start\\\" class=\\\"mythumbnail\\\">\\r\\n        <div class=\\\"profile_icon_orange\\\">{{member.studentName[0]}}</div>\\r\\n      </ion-thumbnail>\\r\\n      <!-- 内容部分 -->\\r\\n      <ion-label>\\r\\n        <h3>{{member.studentName}}</h3>\\r\\n        <p>{{member.studentId}} <span class=\\\"exp ion-float-right exp-color\\\">{{member.studentExp}}&nbsp;经验值</span></p>\\r\\n        <p>签到<span>{{member.signedNumbers}}</span>&nbsp;&nbsp; 缺勤<span>{{member.unSignedNumbers}}</span></p>\\r\\n      </ion-label>\\r\\n    </ion-item>\\r\\n\\r\\n  </ion-list>\\r\\n\\r\\n\\r\\n  \\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MembersPage } from './members.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MembersPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MembersPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MembersPageRoutingModule } from './members-routing.module';\r\n\r\nimport { MembersPage } from './members.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MembersPageRoutingModule\r\n  ],\r\n  declarations: [MembersPage]\r\n})\r\nexport class MembersPageModule {}\r\n","export default \".exp-color {\\n  color: #ef9c05;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY3JlYXRlLWNsYXNzZXMvbWVtYmVycy9EOlxcaHhza3l1blxcbW9iaWxlXFxkYW95dW4vc3JjXFxhcHBcXHBhZ2VzXFxjcmVhdGUtY2xhc3Nlc1xcbWVtYmVyc1xcbWVtYmVycy5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2NyZWF0ZS1jbGFzc2VzL21lbWJlcnMvbWVtYmVycy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxjQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9jcmVhdGUtY2xhc3Nlcy9tZW1iZXJzL21lbWJlcnMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmV4cC1jb2xvcntcclxuICAgIGNvbG9yOiAjZWY5YzA1XHJcbn0iLCIuZXhwLWNvbG9yIHtcbiAgY29sb3I6ICNlZjljMDU7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ZrServicesService } from \"../../../shared/services/zr-services.service\";\r\nimport { LocalStorageService } from \"../../../shared/services/local-storage.service\";\r\nimport { ToastServiceProvider } from \"../../../shared/services/toast-service.service\";\r\nimport { EventService } from \"../../../shared/services/event.service\";\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\n\r\n@Component({\r\n  selector: 'app-members',\r\n  templateUrl: './members.page.html',\r\n  styleUrls: ['./members.page.scss'],\r\n})\r\nexport class MembersPage extends BaseUI  implements OnInit {\r\n\r\n  userId = ''\r\n  courseId = ''\r\n  courseName = ''\r\n  \r\n  members:any[];\r\n  members_count = ''\r\n  sort_flag = true // 默认按经验值绑定\r\n  courseStatus=''\r\n  constructor(private activatedRoute: ActivatedRoute,\r\n    private zrServices: ZrServicesService,\r\n    private localStorageService: LocalStorageService,\r\n    private toastService: ToastServiceProvider,\r\n    private router: Router,\r\n    public eventService: EventService,\r\n    public loadingController: LoadingController\r\n    ) { \r\n      super()\r\n    }\r\n\r\n  ngOnInit() {\r\n    this.activatedRoute.queryParams.subscribe((result) => {\r\n      this.courseId = result.courseId;\r\n      this.courseName = result.courseName\r\n    })\r\n    this.loadCourseInfo()\r\n    this.loadMembers(null)\r\n    super.showLoading( this.loadingController,'请等待',800)\r\n\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    this.activatedRoute.queryParams.subscribe((result) => {\r\n      this.courseId = result.courseId;\r\n      this.courseName = result.courseName\r\n    })\r\n    this.eventService.event.on('memberupdate', () => {\r\n      this.loadCourseInfo();\r\n      this.loadMembers(null)\r\n      super.showLoading( this.loadingController,'请等待',800)\r\n      \r\n    })\r\n\r\n  }\r\n\r\n\r\n  \r\n\r\n  // ionViewWillEnter() {\r\n  //   this.activatedRoute.queryParams.subscribe((result) => {\r\n  //     this.courseId = result.courseId;\r\n  //     this.courseName = result.courseName\r\n  //   })\r\n  //   this.loadCourseInfo()\r\n  //   this.loadMembers(null) \r\n  // }\r\n\r\n  // 获取课程信息\r\n  loadCourseInfo(){\r\n    // 根据id获取该班课的信息\r\n    this.zrServices.getCourseByCourseId(this.courseId).then(async (result:any) => {\r\n      // console.log(result);\r\n      \r\n      if(result.code == '200'){\r\n        this.courseStatus = result.data.endClassStatus\r\n        \r\n      }\r\n    }).catch((error) => {\r\n      console.log('查找班课信息失败', error);\r\n    })\r\n  }\r\n\r\n  loadMembers(event){\r\n    this.zrServices.getMembersByCourseId(this.courseId).then((result:any) => {\r\n      // console.log( '成员返回为：', result);\r\n      this.members = result.data\r\n      this.members_count = result.data.length\r\n      // 排序\r\n      this.sortMembers()\r\n      \r\n    }).catch((error) => {\r\n      console.log('获取', this.courseName, '课程信息失败')\r\n    }).finally(()=>{\r\n      if(event != null){\r\n        event.target.complete()\r\n      }\r\n    })\r\n\r\n  }\r\n  // 切换显示\r\n  toggleShow(){\r\n    this.sort_flag = !this.sort_flag\r\n    this.sortMembers()\r\n  }\r\n\r\n  sortMembers(){\r\n    if(this.sort_flag == true){\r\n      this.members.sort((a: any, b: any) => {\r\n        return b.studentExp - a.studentExp;//经验值大到小\r\n      })\r\n    }else{\r\n      this.members.sort((a: any, b: any) => {\r\n        return a.studentId - b.studentId;//学号小到大\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}