{"version":3,"sources":["src/app/pages/mine/user-info/user-info.page.html","src/app/pages/mine/user-info/user-info-routing.module.ts","src/app/pages/mine/user-info/user-info.module.ts","src/app/pages/mine/user-info/user-info.page.scss","src/app/pages/mine/user-info/user-info.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/tabs/mine\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"ion-text-start\\\">用户信息</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content >\\r\\n    <!-- <ion-list >\\r\\n      <ion-item button detail  routerLink=\\\"/mine/headfaces\\\">\\r\\n        <ion-avatar item-start>\\r\\n          <img src=\\\"{{headface}}\\\" />\\r\\n        </ion-avatar>\\r\\n        <ion-label>修改头像</ion-label>\\r\\n      </ion-item>\\r\\n    </ion-list> -->\\r\\n\\r\\n    <ion-list >\\r\\n      <ion-item>\\r\\n        <ion-label>姓名:</ion-label>  \\r\\n        <ion-input  type=\\\"text\\\" item-end [(ngModel)]=\\\"userDetail.name\\\" ></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>昵称:</ion-label>  \\r\\n        <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userDetail.name\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>出生年份:</ion-label>  \\r\\n        <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userDetail.birthDate\\\"></ion-input>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list  lines='full' >\\r\\n      <ion-item button detail  routerLink=\\\"/edit-school\\\">\\r\\n        <ion-label>\\r\\n          <ion-text color=\\\"primary\\\">\\r\\n            <h2>你所在的学校及院系</h2>\\r\\n          </ion-text>\\r\\n          <ion-text>\\r\\n            <p>{{userDetail.school}}&nbsp;&nbsp;&nbsp;{{userDetail.major}}</p>\\r\\n          </ion-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list  lines='full'>\\r\\n      <ion-list-header>\\r\\n        选择性别\\r\\n      </ion-list-header>\\r\\n      <ion-radio-group  [(ngModel)]=\\\"userDetail.sex\\\"  (ionChange)='getValue()'>\\r\\n      <ion-item>\\r\\n        <ion-label>男</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"男\\\"></ion-radio>    \\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>女</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"女\\\"></ion-radio>\\r\\n      </ion-item>\\r\\n    </ion-radio-group>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list  lines='full'>\\r\\n      <ion-list-header >\\r\\n        选择身份\\r\\n      </ion-list-header>\\r\\n      <ion-radio-group [(ngModel)]=\\\"userDetail.roleId\\\" (ionChange)='getValue()'>\\r\\n      <ion-item>\\r\\n        <ion-label>我是学生</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"3\\\"></ion-radio>    \\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>我是老师</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"2\\\"></ion-radio>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>其他</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"1\\\"></ion-radio>\\r\\n      </ion-item>\\r\\n    </ion-radio-group>\\r\\n    </ion-list>\\r\\n\\r\\n  <ion-list  lines='full'>\\r\\n    <ion-item>\\r\\n      <ion-label>学号/工号:</ion-label>  \\r\\n      <!-- <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userDetail.userId\\\"></ion-input> -->\\r\\n      <ion-text slot=\\\"end\\\" color='primary'>{{userDetail.userId}}</ion-text>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n\\r\\n    <div style=\\\"text-align: center;\\\" class=\\\"ion-padding\\\">\\r\\n      <ion-button expand=\\\"full\\\" color=\\\"primary\\\" (click)=\\\"onSave()\\\" shape='round'>保存</ion-button>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UserInfoPage } from './user-info.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserInfoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UserInfoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UserInfoPageRoutingModule } from './user-info-routing.module';\n\nimport { UserInfoPage } from './user-info.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UserInfoPageRoutingModule\n  ],\n  declarations: [UserInfoPage]\n})\nexport class UserInfoPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21pbmUvdXNlci1pbmZvL3VzZXItaW5mby5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { MylocalstorageService } from 'src/app/shared/services/mylocalstorage.service';\r\nimport { ZrServicesService } from 'src/app/shared/services/zr-services.service';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\nimport { ToastController, } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { EventService } from 'src/app/shared/services/event.service';\r\nimport { formatDate } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-user-info',\r\n  templateUrl: './user-info.page.html',\r\n  styleUrls: ['./user-info.page.scss'],\r\n})\r\nexport class UserInfoPage  extends BaseUI implements OnInit {\r\n  headface: string\r\n  \r\n  public user={\r\n    value:null\r\n  }\r\n  userId:any\r\n  userDetail = {\r\n    name:'',\r\n    birthDate:'',\r\n    sex:'',\r\n    school:'',\r\n    major:'',\r\n    userId:'',\r\n    roleId:''\r\n  };\r\n  constructor(public localStorageService:MylocalstorageService,private zrServices: ZrServicesService,private toastController: ToastController,\r\n    private router :Router, public eventService: EventService\r\n    ) { super()}\r\n\r\n  ngOnInit() {\r\n    this.userId=this.localStorageService.get('uid','')\r\n    this.userDetail.roleId =this.localStorageService.get('roldId','')\r\n    this.loadUserInfo()\r\n  }\r\n  \r\n  ionViewDidEnter(){\r\n    \r\n    // console.log(\"view enter\")\r\n    \r\n    let temp=this.localStorageService.get('schooAandmajor','')\r\n    if (temp){\r\n      this.userDetail.school=temp.colleage\r\n      this.userDetail.major=temp.major\r\n      this.localStorageService.remove('schooAandmajor')\r\n    }\r\n    // console.log('111111111'+this.userDetail.major+this.userDetail.roleId)\r\n  }\r\n   loadUserInfo(){\r\n\r\n    this.zrServices.getUserByUserId(this.userId).then(async (result:any) => {\r\n      // console.log('here:', result.data);\r\n      if(result.success){\r\n          this.userDetail.school=result.data.school\r\n          this.userDetail.major=result.data.major\r\n          this.userDetail.sex=result.data.sex\r\n          this.userDetail.birthDate=result.data.birthDate\r\n          this.userDetail.name=result.data.name\r\n          this.userDetail.userId=result.data.userId\r\n          this.userDetail.roleId=String(result.data.roleId)\r\n          // console.log('asgagaeegeagr'+result.data.roleId)\r\n          \r\n      }\r\n    \r\n    }).catch((error) => {\r\n      console.log('获取用户信息失败', error)\r\n    })\r\n    \r\n  }\r\n\r\n  getValue(){\r\n    // console.log('我选中的是', this.userDetail.roleId)\r\n  }\r\n  ionViewDidLeave(){\r\n    // console.log('userinfo leave')\r\n    this.eventService.event.emit('userupdate');\r\n  }\r\n  onSave(){\r\n   \r\n    \r\n    // console.log(this.userDetail.roleId)\r\n    \r\n    this.zrServices.updateUserinfo(this.userDetail).then((result:any) => {\r\n      // console.log('更新:', result.data);\r\n      if(result.code=='200'){\r\n        this.localStorageService.set('roleId', this.userDetail.roleId)\r\n         super.showToast(this.toastController,'用户信息更新成功')\r\n         this.router.navigateByUrl('/tabs/mine') \r\n        // this.router.navigateByUrl('/tabs/mine').then(()=>{location.reload();});\r\n        //  console.log(result.code)\r\n         console.log('userdetail：',result.data);\r\n        //  console.log(result.msg)\r\n     }else {\r\n         super.showToast(this.toastController,'用户信息更新失败')\r\n     }\r\n     }).catch((error) => {\r\n       super.showToast(this.toastController,'用户信息更新失败')\r\n     })\r\n   }\r\n  \r\n}\r\n"],"sourceRoot":"webpack:///","file":"user-info-user-info-module-es5.js"}