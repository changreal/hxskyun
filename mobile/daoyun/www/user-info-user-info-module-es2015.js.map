{"version":3,"sources":["./src/app/pages/mine/user-info/user-info.page.html","./src/app/pages/mine/user-info/user-info-routing.module.ts","./src/app/pages/mine/user-info/user-info.module.ts","./src/app/pages/mine/user-info/user-info.page.scss","./src/app/pages/mine/user-info/user-info.page.ts"],"names":[],"mappings":"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","file":"user-info-user-info-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/tabs/mine\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"ion-text-start\\\">用户信息</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content >\\r\\n    <!-- <ion-list >\\r\\n      <ion-item button detail  routerLink=\\\"/mine/headfaces\\\">\\r\\n        <ion-avatar item-start>\\r\\n          <img src=\\\"{{headface}}\\\" />\\r\\n        </ion-avatar>\\r\\n        <ion-label>修改头像</ion-label>\\r\\n      </ion-item>\\r\\n    </ion-list> -->\\r\\n\\r\\n    <ion-list >\\r\\n      <ion-item>\\r\\n        <ion-label>姓名:</ion-label>  \\r\\n        <ion-input  type=\\\"text\\\" item-end [(ngModel)]=\\\"userDetail.name\\\" ></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>昵称:</ion-label>  \\r\\n        <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userDetail.name\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>出生年份:</ion-label>  \\r\\n        <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userDetail.birthDate\\\"></ion-input>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list  lines='full' >\\r\\n      <ion-item button detail  routerLink=\\\"/edit-school\\\">\\r\\n        <ion-label>\\r\\n          <ion-text color=\\\"primary\\\">\\r\\n            <h2>你所在的学校及院系</h2>\\r\\n          </ion-text>\\r\\n          <ion-text>\\r\\n            <p>{{userDetail.school}}&nbsp;&nbsp;&nbsp;{{userDetail.major}}</p>\\r\\n          </ion-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list  lines='full'>\\r\\n      <ion-list-header>\\r\\n        选择性别\\r\\n      </ion-list-header>\\r\\n      <ion-radio-group  [(ngModel)]=\\\"userDetail.sex\\\"  (ionChange)='getValue()'>\\r\\n      <ion-item>\\r\\n        <ion-label>男</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"男\\\"></ion-radio>    \\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>女</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"女\\\"></ion-radio>\\r\\n      </ion-item>\\r\\n    </ion-radio-group>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list  lines='full'>\\r\\n      <ion-list-header >\\r\\n        选择身份\\r\\n      </ion-list-header>\\r\\n      <ion-radio-group [(ngModel)]=\\\"userDetail.roleId\\\" (ionChange)='getValue()'>\\r\\n      <ion-item>\\r\\n        <ion-label>我是学生</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"3\\\"></ion-radio>    \\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>我是老师</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"2\\\"></ion-radio>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>其他</ion-label>\\r\\n        <ion-radio slot=\\\"end\\\" value=\\\"1\\\"></ion-radio>\\r\\n      </ion-item>\\r\\n    </ion-radio-group>\\r\\n    </ion-list>\\r\\n\\r\\n  <ion-list  lines='full'>\\r\\n    <ion-item>\\r\\n      <ion-label>学号/工号:</ion-label>  \\r\\n      <!-- <ion-input type=\\\"text\\\" [(ngModel)]=\\\"userDetail.userId\\\"></ion-input> -->\\r\\n      <ion-text slot=\\\"end\\\" color='primary'>{{userDetail.userId}}</ion-text>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n\\r\\n    <div style=\\\"text-align: center;\\\" class=\\\"ion-padding\\\">\\r\\n      <ion-button expand=\\\"full\\\" color=\\\"primary\\\" (click)=\\\"onSave()\\\" shape='round'>保存</ion-button>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UserInfoPage } from './user-info.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserInfoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UserInfoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UserInfoPageRoutingModule } from './user-info-routing.module';\n\nimport { UserInfoPage } from './user-info.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UserInfoPageRoutingModule\n  ],\n  declarations: [UserInfoPage]\n})\nexport class UserInfoPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21pbmUvdXNlci1pbmZvL3VzZXItaW5mby5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { MylocalstorageService } from 'src/app/shared/services/mylocalstorage.service';\r\nimport { ZrServicesService } from 'src/app/shared/services/zr-services.service';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\nimport { ToastController, } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { EventService } from 'src/app/shared/services/event.service';\r\nimport { formatDate } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-user-info',\r\n  templateUrl: './user-info.page.html',\r\n  styleUrls: ['./user-info.page.scss'],\r\n})\r\nexport class UserInfoPage  extends BaseUI implements OnInit {\r\n  headface: string\r\n  \r\n  public user={\r\n    value:null\r\n  }\r\n  userId:any\r\n  userDetail = {\r\n    name:'',\r\n    birthDate:'',\r\n    sex:'',\r\n    school:'',\r\n    major:'',\r\n    userId:'',\r\n    roleId:''\r\n  };\r\n  constructor(public localStorageService:MylocalstorageService,private zrServices: ZrServicesService,private toastController: ToastController,\r\n    private router :Router, public eventService: EventService\r\n    ) { super()}\r\n\r\n  ngOnInit() {\r\n    this.userId=this.localStorageService.get('uid','')\r\n    this.userDetail.roleId =this.localStorageService.get('roldId','')\r\n    this.loadUserInfo()\r\n  }\r\n  \r\n  ionViewDidEnter(){\r\n    \r\n    // console.log(\"view enter\")\r\n    \r\n    let temp=this.localStorageService.get('schooAandmajor','')\r\n    if (temp){\r\n      this.userDetail.school=temp.colleage\r\n      this.userDetail.major=temp.major\r\n      this.localStorageService.remove('schooAandmajor')\r\n    }\r\n    // console.log('111111111'+this.userDetail.major+this.userDetail.roleId)\r\n  }\r\n   loadUserInfo(){\r\n\r\n    this.zrServices.getUserByUserId(this.userId).then(async (result:any) => {\r\n      // console.log('here:', result.data);\r\n      if(result.success){\r\n          this.userDetail.school=result.data.school\r\n          this.userDetail.major=result.data.major\r\n          this.userDetail.sex=result.data.sex\r\n          this.userDetail.birthDate=result.data.birthDate\r\n          this.userDetail.name=result.data.name\r\n          this.userDetail.userId=result.data.userId\r\n          this.userDetail.roleId=String(result.data.roleId)\r\n          // console.log('asgagaeegeagr'+result.data.roleId)\r\n          \r\n      }\r\n    \r\n    }).catch((error) => {\r\n      console.log('获取用户信息失败', error)\r\n    })\r\n    \r\n  }\r\n\r\n  getValue(){\r\n    // console.log('我选中的是', this.userDetail.roleId)\r\n  }\r\n  ionViewDidLeave(){\r\n    // console.log('userinfo leave')\r\n    this.eventService.event.emit('userupdate');\r\n  }\r\n  onSave(){\r\n   \r\n    \r\n    // console.log(this.userDetail.roleId)\r\n    \r\n    this.zrServices.updateUserinfo(this.userDetail).then((result:any) => {\r\n      // console.log('更新:', result.data);\r\n      if(result.code=='200'){\r\n        this.localStorageService.set('roleId', this.userDetail.roleId)\r\n         super.showToast(this.toastController,'用户信息更新成功')\r\n         this.router.navigateByUrl('/tabs/mine') \r\n        // this.router.navigateByUrl('/tabs/mine').then(()=>{location.reload();});\r\n        //  console.log(result.code)\r\n         console.log('userdetail：',result.data);\r\n        //  console.log(result.msg)\r\n     }else {\r\n         super.showToast(this.toastController,'用户信息更新失败')\r\n     }\r\n     }).catch((error) => {\r\n       super.showToast(this.toastController,'用户信息更新失败')\r\n     })\r\n   }\r\n  \r\n}\r\n"],"sourceRoot":"webpack:///"}