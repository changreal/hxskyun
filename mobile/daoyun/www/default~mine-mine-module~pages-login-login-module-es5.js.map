{"version":3,"sources":["src/app/pages/login/login.page.html","src/app/pages/login/login.page.scss","src/app/pages/login/login.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n\\r\\n  <ion-toolbar>\\r\\n    <ion-title class='ion-text-center'>登录</ion-title>\\r\\n    <!-- <ion-buttons>\\r\\n      <button ion-button (click)=\\\"dismiss()\\\">\\r\\n        <span ion-text color='primary' showWhen=\\\"ios\\\">取消</span>\\r\\n        <ion-icon name=\\\"close-outline\\\" showWhen=\\\"android\\\"></ion-icon>\\r\\n      </button>\\r\\n    </ion-buttons> -->\\r\\n  </ion-toolbar>\\r\\n\\r\\n</ion-header>\\r\\n\\r\\n<ion-content no-padding>\\r\\n  <div padding-horizontal>\\r\\n  <form #f=\\\"ngForm\\\">\\r\\n    <ion-list padding-right no-margin>\\r\\n      <ion-item mode='md' class=\\\"ion-no-padding margin-left\\\">\\r\\n        <ion-label>请选择登录方式</ion-label>\\r\\n        <ion-select [ngModelOptions]=\\\"{standalone: true}\\\" [(ngModel)]=\\\"loginType\\\" value=\\\"phone\\\" interface=\\\"action-sheet\\\" (ionChange)='getValue()'>\\r\\n          <ion-select-option value=\\\"phone\\\">手机</ion-select-option>\\r\\n          <ion-select-option value=\\\"email\\\">邮箱</ion-select-option>\\r\\n          <ion-select-option value=\\\"userid\\\">学号</ion-select-option>\\r\\n        </ion-select>\\r\\n      </ion-item> \\r\\n\\r\\n    <ion-item>\\r\\n      <ion-icon name=\\\"person-outline\\\"></ion-icon>\\r\\n      <ion-label fixed>账号</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-input name=\\\"username\\\" type=\\\"text\\\" placeholder=\\\"请输入账号\\\" [(ngModel)]=\\\"username\\\" clearInput required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-icon name=\\\"lock-closed-outline\\\"></ion-icon>\\r\\n      <ion-label fixed>密码</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-input name=\\\"password\\\" type=\\\"{{pwshow?'text':'password'}}\\\"  placeholder='请输入密码' [(ngModel)]=\\\"password\\\"></ion-input>\\r\\n      <a href=\\\"javascript:;\\\"rel=\\\"external nofollow\\\" item-end (click)=\\\"pwshow=!pwshow\\\" [ngClass]=\\\"pwshow?'eyeshow':'eyehide'\\\">\\r\\n        <ion-icon name=\\\"eye-outline\\\" color=\\\"dark\\\" class=\\\"eye-hide\\\"></ion-icon>  <!--闭眼图标-->\\r\\n        <ion-icon name=\\\"eye-off-outline\\\" color=\\\"dark\\\" class=\\\"eye-show\\\"></ion-icon>  <!--睁眼图标-->\\r\\n      </a>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n    <!-- <ion-item>\\r\\n      <ion-input type=\\\"password\\\" placeholder=\\\"请输入密码\\\" #password></ion-input>\\r\\n    </ion-item> -->\\r\\n    <ion-grid>\\r\\n      <!-- 登录注册 -->\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-button expand=\\\"full\\\" color=\\\"primary\\\" (click)=\\\"onLogin()\\\">登录</ion-button>\\r\\n        </ion-col>\\r\\n        <!-- <ion-col>\\r\\n          <ion-button expand=\\\"full\\\" fill=\\\"outline\\\" color=\\\"primary\\\" href=\\\"/signup\\\">注册新账号</ion-button>\\r\\n        </ion-col> -->\\r\\n      </ion-row>\\r\\n      <!-- <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-button expand=\\\"full\\\" color=\\\"primary\\\" >微信登录</ion-button>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-button expand=\\\"full\\\"  color=\\\"primary\\\" >微博登录</ion-button>\\r\\n        </ion-col>\\r\\n      </ion-row> -->\\r\\n      <!-- 忘记密码 -->\\r\\n      <ion-row>\\r\\n        <!-- <ion-col>\\r\\n          <ion-button fill=\\\"clear\\\" size=\\\"small\\\" >手机号验证登录</ion-button>\\r\\n        </ion-col> -->\\r\\n        <ion-col>\\r\\n          <ion-button fill=\\\"clear\\\" size=\\\"small\\\" routerLink=\\\"/forget-password\\\">忘记密码？</ion-button>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-button fill=\\\"clear\\\" size=\\\"small\\\" routerLink=\\\"/register\\\">注册新账号</ion-button>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      \\r\\n    </ion-grid>\\r\\n    </form>\\r\\n  </div>\\r\\n  \\r\\n \\r\\n\\r\\n</ion-content>\\r\\n\\r\\n\"","export default \".toolbar-title-md {\\n  text-align: center;\\n}\\n\\n.eyehide .eye-hide, .eyeshow .eye-show {\\n  display: block;\\n}\\n\\n.eyehide .eye-show, .eyeshow .eye-hide {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vRDpcXGh4c2t5dW5cXG1vYmlsZVxcZGFveXVuL3NyY1xcYXBwXFxwYWdlc1xcbG9naW5cXGxvZ2luLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7QUNDSjs7QURDQTtFQUNJLGNBQUE7QUNFSjs7QURBQTtFQUNJLGFBQUE7QUNHSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50b29sYmFyLXRpdGxlLW1kIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB9XHJcbi5leWVoaWRlIC5leWUtaGlkZSwgLmV5ZXNob3cgLmV5ZS1zaG93e1xyXG4gICAgZGlzcGxheTogYmxvY2s7Ly/orqnlr7nosaHmiJDkuLrlnZfnuqflhYPntKBcclxufVxyXG4uZXllaGlkZSAuZXllLXNob3csIC5leWVzaG93IC5leWUtaGlkZXtcclxuICAgIGRpc3BsYXk6IG5vbmU7Ly/mraTlhYPntKDkuI3kvJrooqvmmL7npLpcclxufSIsIi50b29sYmFyLXRpdGxlLW1kIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uZXllaGlkZSAuZXllLWhpZGUsIC5leWVzaG93IC5leWUtc2hvdyB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4uZXllaGlkZSAuZXllLXNob3csIC5leWVzaG93IC5leWUtaGlkZSB7XG4gIGRpc3BsYXk6IG5vbmU7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { NavController, NavParams, AlertController, ToastController, ModalController, LoadingController ,} from '@ionic/angular';\r\nimport { NgForm } from '@angular/forms';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { LocalStorageService } from 'src/app/shared/services/local-storage.service';\r\nimport { MylocalstorageService } from 'src/app/shared/services/mylocalstorage.service';\r\n\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/shared/services/common.service';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\nimport { ZrServicesService } from 'src/app/shared/services/zr-services.service';\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage extends BaseUI implements OnInit {\r\n  \r\n  public loadingIsOpen: any = false\r\n  username: string = ''\r\n  password: string = ''\r\n  loading:any\r\n  public dataList:any\r\n  public peopleInfo:any = {\r\n    phone: '',\r\n    password:''\r\n  }\r\n  loginType='phone'\r\n  constructor(private alertController: AlertController,private toastController: ToastController,\r\n    public modalCtrl :ModalController,public loadingController: LoadingController,public http:HttpClient,\r\n    private localStorageService: MylocalstorageService,public router:Router,public common:CommonService,private zrServices: ZrServicesService\r\n    ) { super()}\r\n\r\n  // async dismiss() {\r\n  //   this.modalCtrl.dismiss({\r\n  //     'dismissed': true\r\n  //   });\r\n  // }\r\n\r\n  ngOnInit() {\r\n  }\r\n  \r\n async onLogin(form:NgForm){\r\n    console.log(this.username+this.password)\r\n    // let url=\"https://imoocqa.gugujiankong.com/api/account/login\"+\"?mobile=\"+this.username+\"&password=\"+this.password\r\n    // let url='/Login/checkLogin'\r\n    this.peopleInfo.phone=this.username\r\n    this.peopleInfo.password=this.password\r\n    console.log(\"login info:\"+this.peopleInfo)\r\n    if(this.username === ''){\r\n      let toast = await this.toastController.create({\r\n        message : '请输入您的手机号码或者邮箱',\r\n        duration :3000\r\n      });\r\n      toast.present();\r\n\r\n    }else if(this.password === ''){\r\n      let alert = await this.toastController.create({\r\n        message : '请输入您的密码',\r\n        duration : 3000\r\n      });\r\n      alert.present();\r\n\r\n    }else{\r\n      let params:object\r\n      if(this.loginType=='phone'){\r\n         params = {\r\n        \"phone\" : this.username,\r\n        \"password\" : this.password\r\n        }\r\n      }else if(this.loginType=='email'){\r\n        params = {\r\n          \"email\" : this.username,\r\n          \"password\" : this.password\r\n          }\r\n\r\n      }else if(this.loginType=='userid'){\r\n        params = {\r\n          \"userId\" : this.username,\r\n          \"password\" : this.password\r\n          }\r\n      }\r\n      // let params:object = {\r\n      //   \"phone\" : this.username,\r\n      //   \"password\" : this.password\r\n      // }\r\n      // 验证登录账号与密码，不对的话给出错误提示\r\n      super.showLoading(this.loadingController,\"登录中\")\r\n      this.zrServices.login(params).then((result:any) => {\r\n        console.log('登录的result是：', result);\r\n        if(result.code=='100'){\r\n            this.localStorageService.set('Token',result[\"data\"])\r\n            console.log('uid'+result.extra.userRole.userId)\r\n            this.localStorageService.set('uid',result.extra.userRole.userId)\r\n            this.localStorageService.set('roleId', result.extra.userRole.roleId)\r\n            super.showToast(this.toastController,'登录成功')\r\n            this.router.navigateByUrl('/tabs/join-classes') \r\n            console.log(result);   \r\n       }else {\r\n            console.log(result)\r\n            super.showToast(this.toastController,'登录失败,请检查账号和密码')\r\n       }\r\n       }).catch((error) => {\r\n            super.showToast(this.toastController,'登录失败')\r\n       })\r\n     }\r\n      // this.common.ajaxPost(url, this.peopleInfo)\r\n      // .then((response:any)=>{\r\n      //   super.showToast(this.toastController,response)\r\n      //   if(response['code']==100){   \r\n      //     console.log(response);\r\n      //     this.localStorageService.set('Token',response[\"data\"])\r\n      //     console.log('uid'+response['extra'])\r\n      //     this.router.navigateByUrl('/tabs')    \r\n      //     console.log(\"succ  in \")\r\n      //   }else{\r\n      //     this.presentToast(response[\"msg\"])    \r\n      //   }\r\n      // })\r\n      // .catch((err:any)=>{\r\n      //   console.log(err);\r\n      //   super.showToast(this.toastController,err)\r\n      // })\r\n    }\r\n\r\n\r\nasync presentToast(mes:string) {\r\n  const toast = await this.toastController.create({\r\n    message: mes,\r\n    duration: 2000\r\n  });\r\n  toast.present();\r\n}\r\n\r\n\r\ngetValue(){\r\n  console.log('登录方式'+this.loginType)\r\n}\r\n\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"default~mine-mine-module~pages-login-login-module-es5.js"}