{"version":3,"sources":["./src/app/pages/join-classes/join/join.page.html","./src/app/pages/join-classes/join/join-routing.module.ts","./src/app/pages/join-classes/join/join.module.ts","./src/app/pages/join-classes/join/join.page.scss","./src/app/pages/join-classes/join/join.page.ts"],"names":[],"mappings":"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","file":"join-join-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/tabs/join-classes\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>加入班课</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-label *ngIf=\\\"!hasThisClass\\\">不存在此班课，请重新输入</ion-label>\\r\\n  <ion-card *ngIf=\\\"hasThisClass\\\">\\r\\n\\r\\n    <!-- 班课头信息 -->\\r\\n    <ion-card-header>\\r\\n      <ion-item lines='full'  class=\\\"ion-align-items-center\\\">\\r\\n        <ion-label class=\\\"ion-text-center\\\" >\\r\\n          <img class=\\\"join-class-img\\\"  src=\\\"/assets/img/fz.png\\\">\\r\\n          <h4>{{courseName}}</h4>\\r\\n          <p>课程描述</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n    </ion-card-header>\\r\\n\\r\\n    <!-- 其他信息 -->\\r\\n    <ion-card-content>\\r\\n      <ion-list>\\r\\n        <ion-item lines=\\\"full\\\">\\r\\n            <ion-text class=\\\"ion-padding-end\\\">\\r\\n              <h4>老师</h4>\\r\\n            </ion-text>\\r\\n          <ion-label>\\r\\n            <p>{{courseTeacherName}}</p>\\r\\n          </ion-label>\\r\\n        </ion-item>\\r\\n\\r\\n        <ion-item lines=\\\"full\\\">\\r\\n          <ion-text class=\\\"ion-padding-end\\\">\\r\\n            <h4>类型</h4>\\r\\n          </ion-text>\\r\\n        <ion-label>\\r\\n          <p>{{courseDepartment}}</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n      \\r\\n      </ion-list>\\r\\n      <!-- 退出班课按钮 -->\\r\\n      <ion-button slot=\\\"start\\\" expand=\\\"block\\\" fill='solid' class=\\\"ion-margin-top\\\" (click)=\\\"joinClass()\\\">\\r\\n        加入\\r\\n      </ion-button>\\r\\n        \\r\\n    </ion-card-content>\\r\\n\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-text >\\r\\n    <p>\\r\\n      {{informText}}\\r\\n    </p>\\r\\n  </ion-text>\\r\\n\\r\\n  \\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { JoinPage } from './join.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: JoinPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class JoinPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { JoinPageRoutingModule } from './join-routing.module';\r\n\r\nimport { JoinPage } from './join.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    JoinPageRoutingModule\r\n  ],\r\n  declarations: [JoinPage]\r\n})\r\nexport class JoinPageModule {}\r\n","export default \".join-class-img {\\n  width: 7em;\\n  margin: 0 auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvam9pbi1jbGFzc2VzL2pvaW4vRDpcXGh4c2t5dW5cXG1vYmlsZVxcZGFveXVuL3NyY1xcYXBwXFxwYWdlc1xcam9pbi1jbGFzc2VzXFxqb2luXFxqb2luLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvam9pbi1jbGFzc2VzL2pvaW4vam9pbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxVQUFBO0VBQ0EsY0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvam9pbi1jbGFzc2VzL2pvaW4vam9pbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuam9pbi1jbGFzcy1pbWd7XHJcbiAgICB3aWR0aDogN2VtO1xyXG4gICAgbWFyZ2luOiAwIGF1dG87XHJcbn0iLCIuam9pbi1jbGFzcy1pbWcge1xuICB3aWR0aDogN2VtO1xuICBtYXJnaW46IDAgYXV0bztcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ZrServicesService } from 'src/app/shared/services/zr-services.service';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { Route } from '@angular/compiler/src/core';\r\nimport { MylocalstorageService } from 'src/app/shared/services/mylocalstorage.service';\r\nimport { EventService } from 'src/app/shared/services/event.service';\r\nimport { LoadingController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-join',\r\n  templateUrl: './join.page.html',\r\n  styleUrls: ['./join.page.scss'],\r\n})\r\nexport class JoinPage extends BaseUI implements OnInit  {\r\n  courseId:any\r\n  hasThisClass:boolean = false\r\n   // 临时变量\r\n   userId:any\r\n   informText:''\r\n  // 班课信息\r\n  courseMajor:string;\r\n  courseName:string\r\n  courseDepartment:string\r\n  courseSchool:string\r\n  courseTeacherName:string\r\n  constructor(private activatedRoute: ActivatedRoute, private zrServices: ZrServicesService,public eventService:EventService,\r\n    private toastController: ToastController,private router:Router, private localStorageService: MylocalstorageService,\r\n    public loadingController: LoadingController\r\n    ) {\r\n    super()\r\n    activatedRoute.queryParams.subscribe(queryParams => {\r\n      this.courseId= queryParams.cId;\r\n      // console.log('getcid'+this.courseId)\r\n    });\r\n   }\r\n\r\n  ngOnInit() {\r\n    super.showLoading( this.loadingController,'请等待',900)\r\n    this.userId=this.localStorageService.get('uid','')\r\n    this.loadCourseInfo()\r\n  }\r\n  ionViewDidLeave(){\r\n    // console.log('joinclass leave')\r\n    this.eventService.event.emit('classupdate');\r\n  }\r\n  loadCourseInfo(){\r\n\r\n    this.zrServices.getCourseByCourseId(this.courseId).then(async (result:any) => {\r\n      console.log('here:', result);\r\n      if(result.data){\r\n        this.hasThisClass = true\r\n        this.courseName = result.data.courseName\r\n        this.courseMajor = result.data.major\r\n        this.courseSchool = result.data.school\r\n        this.courseTeacherName = result.data.teacherName\r\n        this.courseDepartment = result.data.department\r\n      }\r\n      if(result.code !='200'){\r\n        this.informText = result.msg\r\n      }\r\n    \r\n    }).catch((error) => {\r\n      console.log('获取课程信息失败', error)\r\n      this.informText = error.message\r\n    })\r\n  }\r\n\r\n  joinClass(){\r\n    console.log('joinclass work')\r\n    let params:object = {\r\n      \"courseId\" : this.courseId,\r\n      \"studentId\" : this.userId\r\n    }\r\n    super.showLoading( this.loadingController,'请等待',1200)\r\n    this.zrServices.joinClass(params).then((result:any) => {\r\n     if(result.code=='200'){\r\n        super.showToast(this.toastController,'加入班课成功')\r\n        location.replace('/tabs/join-classes')   // 这样实现页面刷新，并且无法返回当前页面路径\r\n\r\n        // this.router.navigateByUrl('/tabs/join-classes') \r\n        // console.log(result.code)\r\n        // console.log('课程data：',result.data);\r\n        // console.log(result.msg)\r\n    }else if(result.code=='400'){\r\n        super.showToast(this.toastController,'已加入该班课')\r\n    }\r\n    }).catch((error) => {\r\n      super.showToast(this.toastController,'加入班课失败')\r\n    })\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}