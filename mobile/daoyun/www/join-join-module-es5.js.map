{"version":3,"sources":["src/app/pages/join-classes/join/join.page.html","src/app/pages/join-classes/join/join-routing.module.ts","src/app/pages/join-classes/join/join.module.ts","src/app/pages/join-classes/join/join.page.scss","src/app/pages/join-classes/join/join.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/tabs/join-classes\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>加入班课</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-label *ngIf=\\\"!hasThisClass\\\">不存在此班课，请重新输入</ion-label>\\r\\n  <ion-card *ngIf=\\\"hasThisClass\\\">\\r\\n\\r\\n    <!-- 班课头信息 -->\\r\\n    <ion-card-header>\\r\\n      <ion-item lines='full'  class=\\\"ion-align-items-center\\\">\\r\\n        <ion-label class=\\\"ion-text-center\\\" >\\r\\n          <img class=\\\"join-class-img\\\"  src=\\\"/assets/img/fz.png\\\">\\r\\n          <h4>{{courseName}}</h4>\\r\\n          <p>课程描述</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n    </ion-card-header>\\r\\n\\r\\n    <!-- 其他信息 -->\\r\\n    <ion-card-content>\\r\\n      <ion-list>\\r\\n        <ion-item lines=\\\"full\\\">\\r\\n            <ion-text class=\\\"ion-padding-end\\\">\\r\\n              <h4>老师</h4>\\r\\n            </ion-text>\\r\\n          <ion-label>\\r\\n            <p>{{courseTeacherName}}</p>\\r\\n          </ion-label>\\r\\n        </ion-item>\\r\\n\\r\\n        <ion-item lines=\\\"full\\\">\\r\\n          <ion-text class=\\\"ion-padding-end\\\">\\r\\n            <h4>类型</h4>\\r\\n          </ion-text>\\r\\n        <ion-label>\\r\\n          <p>{{courseDepartment}}</p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n      \\r\\n      </ion-list>\\r\\n      <!-- 退出班课按钮 -->\\r\\n      <ion-button slot=\\\"start\\\" expand=\\\"block\\\" fill='solid' class=\\\"ion-margin-top\\\" (click)=\\\"joinClass()\\\">\\r\\n        加入\\r\\n      </ion-button>\\r\\n        \\r\\n    </ion-card-content>\\r\\n\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-text >\\r\\n    <p>\\r\\n      {{informText}}\\r\\n    </p>\\r\\n  </ion-text>\\r\\n\\r\\n  \\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { JoinPage } from './join.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: JoinPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class JoinPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { JoinPageRoutingModule } from './join-routing.module';\r\n\r\nimport { JoinPage } from './join.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    JoinPageRoutingModule\r\n  ],\r\n  declarations: [JoinPage]\r\n})\r\nexport class JoinPageModule {}\r\n","export default \".join-class-img {\\n  width: 7em;\\n  margin: 0 auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvam9pbi1jbGFzc2VzL2pvaW4vRDpcXGh4c2t5dW5cXG1vYmlsZVxcZGFveXVuL3NyY1xcYXBwXFxwYWdlc1xcam9pbi1jbGFzc2VzXFxqb2luXFxqb2luLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvam9pbi1jbGFzc2VzL2pvaW4vam9pbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxVQUFBO0VBQ0EsY0FBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvam9pbi1jbGFzc2VzL2pvaW4vam9pbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuam9pbi1jbGFzcy1pbWd7XHJcbiAgICB3aWR0aDogN2VtO1xyXG4gICAgbWFyZ2luOiAwIGF1dG87XHJcbn0iLCIuam9pbi1jbGFzcy1pbWcge1xuICB3aWR0aDogN2VtO1xuICBtYXJnaW46IDAgYXV0bztcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ZrServicesService } from 'src/app/shared/services/zr-services.service';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { Route } from '@angular/compiler/src/core';\r\nimport { MylocalstorageService } from 'src/app/shared/services/mylocalstorage.service';\r\nimport { EventService } from 'src/app/shared/services/event.service';\r\nimport { LoadingController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-join',\r\n  templateUrl: './join.page.html',\r\n  styleUrls: ['./join.page.scss'],\r\n})\r\nexport class JoinPage extends BaseUI implements OnInit  {\r\n  courseId:any\r\n  hasThisClass:boolean = false\r\n   // 临时变量\r\n   userId:any\r\n   informText:''\r\n  // 班课信息\r\n  courseMajor:string;\r\n  courseName:string\r\n  courseDepartment:string\r\n  courseSchool:string\r\n  courseTeacherName:string\r\n  constructor(private activatedRoute: ActivatedRoute, private zrServices: ZrServicesService,public eventService:EventService,\r\n    private toastController: ToastController,private router:Router, private localStorageService: MylocalstorageService,\r\n    public loadingController: LoadingController\r\n    ) {\r\n    super()\r\n    activatedRoute.queryParams.subscribe(queryParams => {\r\n      this.courseId= queryParams.cId;\r\n      // console.log('getcid'+this.courseId)\r\n    });\r\n   }\r\n\r\n  ngOnInit() {\r\n    super.showLoading( this.loadingController,'请等待',900)\r\n    this.userId=this.localStorageService.get('uid','')\r\n    this.loadCourseInfo()\r\n  }\r\n  ionViewDidLeave(){\r\n    // console.log('joinclass leave')\r\n    this.eventService.event.emit('classupdate');\r\n  }\r\n  loadCourseInfo(){\r\n\r\n    this.zrServices.getCourseByCourseId(this.courseId).then(async (result:any) => {\r\n      console.log('here:', result);\r\n      if(result.data){\r\n        this.hasThisClass = true\r\n        this.courseName = result.data.courseName\r\n        this.courseMajor = result.data.major\r\n        this.courseSchool = result.data.school\r\n        this.courseTeacherName = result.data.teacherName\r\n        this.courseDepartment = result.data.department\r\n      }\r\n      if(result.code !='200'){\r\n        this.informText = result.msg\r\n      }\r\n    \r\n    }).catch((error) => {\r\n      console.log('获取课程信息失败', error)\r\n      this.informText = error.message\r\n    })\r\n  }\r\n\r\n  joinClass(){\r\n    console.log('joinclass work')\r\n    let params:object = {\r\n      \"courseId\" : this.courseId,\r\n      \"studentId\" : this.userId\r\n    }\r\n    super.showLoading( this.loadingController,'请等待',1200)\r\n    this.zrServices.joinClass(params).then((result:any) => {\r\n     if(result.code=='200'){\r\n        super.showToast(this.toastController,'加入班课成功')\r\n        location.replace('/tabs/join-classes')   // 这样实现页面刷新，并且无法返回当前页面路径\r\n\r\n        // this.router.navigateByUrl('/tabs/join-classes') \r\n        // console.log(result.code)\r\n        // console.log('课程data：',result.data);\r\n        // console.log(result.msg)\r\n    }else if(result.code=='400'){\r\n        super.showToast(this.toastController,'已加入该班课')\r\n    }\r\n    }).catch((error) => {\r\n      super.showToast(this.toastController,'加入班课失败')\r\n    })\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///","file":"join-join-module-es5.js"}