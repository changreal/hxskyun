{"version":3,"sources":["src/app/pages/mine/edit-password/edit-password.page.html","src/app/pages/mine/edit-password/edit-password-routing.module.ts","src/app/pages/mine/edit-password/edit-password.module.ts","src/app/pages/mine/edit-password/edit-password.page.scss","src/app/pages/mine/edit-password/edit-password.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar >\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button text=\\\"返回\\\" color=\\\"primary\\\"  defaultHref=\\\"/tabs/mine\\\" ></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>修改密码</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding>\\r\\n  <form #passwordForm novalidate>\\r\\n    <ion-list>\\r\\n      <!-- 旧密码 -->\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">输入旧密码</ion-label>\\r\\n        <ion-input type=\\\"password\\\" required [(ngModel)]=\\\"oldpassword\\\" name=\\\"oldpass\\\" #oldpass=\\\"ngModel\\\"\\r\\n                   pattern=\\\"[0-9a-zA-Z]{6,16}\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <!-- <ion-text [hidden]=\\\"isOldPassword\\\" padding-start color=\\\"danger\\\">您输入的旧密码不正确</ion-text> -->\\r\\n      <ion-text [hidden]=\\\"!oldpass.errors.pattern\\\" padding-start color=\\\"danger\\\" *ngIf=\\\"oldpass.invalid && oldpass.touched\\\">\\r\\n        密码格式为6至16位的数字字母\\r\\n      </ion-text>\\r\\n      <!-- 新密码 -->\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">请输入新密码</ion-label>\\r\\n        <ion-input type=\\\"password\\\" required [(ngModel)]=\\\"newPassword\\\" name=\\\"newpass\\\" #newpass=\\\"ngModel\\\"\\r\\n                   pattern=\\\"[0-9a-zA-Z]{6,16}\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-text [hidden]=\\\"!newpass.errors?.pattern\\\" padding-start color=\\\"danger\\\" *ngIf=\\\"newpass.invalid && newpass.touched\\\">\\r\\n        密码格式为6至16位的数字字母\\r\\n      </ion-text>\\r\\n      <!-- 再次新密码 -->\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">请再输入一次</ion-label>\\r\\n        <ion-input type=\\\"password\\\" required [(ngModel)]=\\\"checkPassword\\\" name=\\\"checkpass\\\" #checkpass=\\\"ngModel\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-text [hidden]=\\\"newPassword == checkPassword\\\" padding-start color=\\\"danger\\\">两次密码不一致</ion-text>\\r\\n    </ion-list>\\r\\n    <!-- 确定提交 -->\\r\\n    <ion-button expand=\\\"block\\\" [disabled]=\\\"passwordForm.invalid\\\" (click)=\\\"onSave()\\\">\\r\\n      确定\\r\\n    </ion-button>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EditPasswordPage } from './edit-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditPasswordPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EditPasswordPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditPasswordPageRoutingModule } from './edit-password-routing.module';\n\nimport { EditPasswordPage } from './edit-password.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EditPasswordPageRoutingModule\n  ],\n  declarations: [EditPasswordPage]\n})\nexport class EditPasswordPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21pbmUvZWRpdC1wYXNzd29yZC9lZGl0LXBhc3N3b3JkLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { MylocalstorageService } from 'src/app/shared/services/mylocalstorage.service';\r\nimport { ZrServicesService } from 'src/app/shared/services/zr-services.service';\r\nimport { BaseUI } from 'src/app/common/baseui';\r\n\r\n@Component({\r\n  selector: 'app-edit-password',\r\n  templateUrl: './edit-password.page.html',\r\n  styleUrls: ['./edit-password.page.scss'],\r\n})\r\nexport class EditPasswordPage extends BaseUI implements OnInit {\r\n  isOldPassword = true;\r\n  oldPass:any\r\n  oldpassword: string;\r\n  newPassword: string;\r\n  checkPassword: string;\r\n  userId:any\r\n  constructor(public router:Router,\r\n    private localStorageService :MylocalstorageService,private zrServices :ZrServicesService,\r\n    private toastController: ToastController,) { \r\n      super()\r\n    }\r\n\r\n  async onSave() {\r\n    this.isOldPassword = this.oldPass == this.oldpassword ? true : false;\r\n    // 验证新密码\r\n    let params:object = {\r\n      \"userId\" : this.userId,\r\n      \"password\" : this.newPassword\r\n    }\r\n    if ( this.isOldPassword && this.newPassword == this.checkPassword) {\r\n      this.zrServices.updateUserinfo(params).then((result:any) => {\r\n        // console.log('更新:', result.data.password);\r\n        if(result.code=='200'){\r\n           super.showToast(this.toastController,'更新成功,重新登录')\r\n           this.router.navigateByUrl('/login') \r\n           this.localStorageService.remove('Token');\r\n           this.localStorageService.remove('uid');    \r\n       }\r\n       }).catch((error) => {\r\n        // console.log('错了。。。。')\r\n         super.showToast(this.toastController,'密码更新失败')\r\n       })\r\n    }\r\n    else {\r\n        super.showToast(this.toastController,'密码不正确')\r\n    }\r\n  }\r\n  ngOnInit() {\r\n    \r\n  }\r\n  \r\n  ionViewDidEnter(){\r\n    this.userId=this.localStorageService.get('uid','')\r\n    this.loadUserInfo()\r\n  }\r\n  loadUserInfo(){\r\n\r\n    this.zrServices.getUserByUserId(this.userId).then(async (result:any) => {\r\n      // console.log('here:', result.data);\r\n      if(result.code=='200'){\r\n          // console.log('asgagaeegeagr'+result.data.roleId)   \r\n          this.oldPass=result.data.password\r\n      } else{\r\n        // super.showToast(this.toastController,'获取信息失败')\r\n        // super.showToast(this.toastController,'用户信息更新失败')\r\n      }\r\n    }).catch((error) => {\r\n      console.log('获取用户信息失败', error)\r\n    })\r\n    \r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"edit-password-edit-password-module-es5.js"}